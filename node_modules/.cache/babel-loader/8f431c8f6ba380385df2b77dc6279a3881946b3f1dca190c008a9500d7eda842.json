{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const{user}=useAuth();const[memorials,setMemorials]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{fetchMemorials();},[]);const fetchMemorials=async()=>{try{const response=await axios.get('/api/user/memorials');setMemorials(response.data.memorials);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to fetch memorials');}finally{setLoading(false);}};const copyMemorialLink=memorialId=>{const link=`${window.location.origin}/memorial/${memorialId}`;navigator.clipboard.writeText(link);// You could add a toast notification here\nalert('Memorial link copied to clipboard!');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading your memorials...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome back, \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your memorials and share them with loved ones\"}),/*#__PURE__*/_jsx(Link,{to:\"/create-memorial\",className:\"create-btn\",children:\"Create New Memorial\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),memorials.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDD4A\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"No memorials yet\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Create your first memorial to honor a loved one\"}),/*#__PURE__*/_jsx(Link,{to:\"/create-memorial\",className:\"btn btn-primary\",children:\"Create Your First Memorial\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"memorials-grid\",children:memorials.map(memorial=>/*#__PURE__*/_jsxs(\"div\",{className:\"memorial-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"memorial-image\",children:[/*#__PURE__*/_jsx(\"img\",{src:memorial.photo_url,alt:memorial.name}),/*#__PURE__*/_jsx(\"div\",{className:\"memorial-overlay\",children:/*#__PURE__*/_jsx(Link,{to:`/memorial/${memorial.id}`,className:\"view-btn\",children:\"View Memorial\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memorial-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:memorial.name}),/*#__PURE__*/_jsx(\"p\",{children:memorial.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"memorial-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:`status ${memorial.is_public?'public':'private'}`,children:memorial.is_public?'Public':'Private'}),/*#__PURE__*/_jsxs(\"span\",{className:\"date\",children:[\"Created \",new Date(memorial.created_at).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memorial-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>copyMemorialLink(memorial.id),className:\"share-btn\",children:\"Share Link\"}),/*#__PURE__*/_jsx(Link,{to:`/memorial/${memorial.id}/add-memory`,className:\"add-memory-btn\",children:\"Add Memory\"})]})]})]},memorial.id))})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Link","useAuth","axios","jsx","_jsx","jsxs","_jsxs","Dashboard","user","memorials","setMemorials","loading","setLoading","error","setError","fetchMemorials","response","get","data","err","_err$response","_err$response$data","copyMemorialLink","memorialId","link","window","location","origin","navigator","clipboard","writeText","alert","className","children","name","to","length","map","memorial","src","photo_url","alt","id","description","is_public","Date","created_at","toLocaleDateString","onClick"],"sources":["/workspace/Mozaiek/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport './Dashboard.css';\n\ninterface Memorial {\n  id: string;\n  name: string;\n  description: string;\n  photo_url: string;\n  is_public: boolean;\n  created_at: string;\n  memories_count?: number;\n}\n\nconst Dashboard: React.FC = () => {\n  const { user } = useAuth();\n  const [memorials, setMemorials] = useState<Memorial[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchMemorials();\n  }, []);\n\n  const fetchMemorials = async () => {\n    try {\n      const response = await axios.get('/api/user/memorials');\n      setMemorials(response.data.memorials);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to fetch memorials');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const copyMemorialLink = (memorialId: string) => {\n    const link = `${window.location.origin}/memorial/${memorialId}`;\n    navigator.clipboard.writeText(link);\n    // You could add a toast notification here\n    alert('Memorial link copied to clipboard!');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard-container\">\n        <div className=\"loading\">Loading your memorials...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-container\">\n      <div className=\"dashboard-header\">\n        <h1>Welcome back, {user?.name}</h1>\n        <p>Manage your memorials and share them with loved ones</p>\n        <Link to=\"/create-memorial\" className=\"create-btn\">\n          Create New Memorial\n        </Link>\n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n\n      {memorials.length === 0 ? (\n        <div className=\"empty-state\">\n          <div className=\"empty-icon\">üïäÔ∏è</div>\n          <h2>No memorials yet</h2>\n          <p>Create your first memorial to honor a loved one</p>\n          <Link to=\"/create-memorial\" className=\"btn btn-primary\">\n            Create Your First Memorial\n          </Link>\n        </div>\n      ) : (\n        <div className=\"memorials-grid\">\n          {memorials.map((memorial) => (\n            <div key={memorial.id} className=\"memorial-card\">\n              <div className=\"memorial-image\">\n                <img src={memorial.photo_url} alt={memorial.name} />\n                <div className=\"memorial-overlay\">\n                  <Link to={`/memorial/${memorial.id}`} className=\"view-btn\">\n                    View Memorial\n                  </Link>\n                </div>\n              </div>\n              \n              <div className=\"memorial-content\">\n                <h3>{memorial.name}</h3>\n                <p>{memorial.description}</p>\n                \n                <div className=\"memorial-meta\">\n                  <span className={`status ${memorial.is_public ? 'public' : 'private'}`}>\n                    {memorial.is_public ? 'Public' : 'Private'}\n                  </span>\n                  <span className=\"date\">\n                    Created {new Date(memorial.created_at).toLocaleDateString()}\n                  </span>\n                </div>\n                \n                <div className=\"memorial-actions\">\n                  <button \n                    onClick={() => copyMemorialLink(memorial.id)}\n                    className=\"share-btn\"\n                  >\n                    Share Link\n                  </button>\n                  <Link \n                    to={`/memorial/${memorial.id}/add-memory`}\n                    className=\"add-memory-btn\"\n                  >\n                    Add Memory\n                  </Link>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}